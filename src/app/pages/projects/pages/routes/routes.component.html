<div
  [ngClass]="{
    isMobileSelected: isMobile && selectedRoute,
    isMobileUnselected: isMobile && !selectedRoute
  }"
  class="routes"
>
  <div *ngIf="!isMobile || (isMobile && !selectedRoute)" class="routes__list">
    <div class="routes__list__actions">
      <button (click)="openCreateModal()" mat-button>
        <mat-icon>add</mat-icon>
      </button>
      <button [routerLink]="['/projects', projectId, 'members']" mat-button>
        <mat-icon>person</mat-icon>
      </button>
      <button (click)="openForkModal()" mat-button>
        <img src="assets/icons/source-control.svg" />
      </button>
      <button (click)="openTokensModal(projectId)" mat-button>
        <mat-icon>key</mat-icon>
      </button>
    </div>
    <div class="routes__list__search">
      <mat-form-field appearance="fill">
        <mat-label>{{ "PAGES.ROUTES.SEARCH_ROUTES" | translate }}</mat-label>
        <input [formControl]="search" matInput />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>
    <div
      *ngIf="routes"
      (cdkDropListDropped)="handleSort($event)"
      cdkDropList
      [cdkDropListDisabled]="isMobile"
      infiniteScroll
      [maxItems]="maxRoutes"
      [currentItems]="routes.length"
      [itemsPerPage]="20"
      (newPageNeeded)="getRoutes($event, 20)"
      class="routes__list__items"
    >
      <app-route-list-item
        (click)="selectRoute(route)"
        *ngFor="let route of routes; trackBy: trackByRoute"
        [route]="route"
        [isSelected]="route.id === selectedRoute?.id"
      ></app-route-list-item>
    </div>
  </div>
  <div *ngIf="!isMobile || (isMobile && selectedRoute)" class="routes__info">
    <app-route-info
      *ngIf="selectedRoute"
      (updatedRoute)="updateRoute($event)"
      (back)="selectedRoute = undefined"
      [route]="selectedRoute"
    ></app-route-info>
    <div *ngIf="!selectedRoute" class="routes__info__missing">
      <h4>{{ "PAGES.ROUTES.SELECT_ROUTE" | translate }}</h4>
    </div>
  </div>
</div>
